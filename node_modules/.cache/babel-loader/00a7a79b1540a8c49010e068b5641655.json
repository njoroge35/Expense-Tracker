{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/njoroge/Expense-Tracker/expense-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/njoroge/Expense-Tracker/expense-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/njoroge/Expense-Tracker/expense-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/njoroge/Expense-Tracker/expense-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/njoroge/Expense-Tracker/expense-tracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import{BrowserRouter as Router,Route}from'react-router-dom';import Header from'./components/Header';import Footer from'./components/Footer';import Budgets from'./components/Budgets';import AddBudget from'./components/AddBudget';var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAddBudget=_useState2[0],setShowAddBudget=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),budgets=_useState4[0],setBudgets=_useState4[1];useEffect(function(){var getBudgets=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var budgetsFromServer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchBudgets();case 2:budgetsFromServer=_context.sent;setBudgets(budgetsFromServer);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getBudgets(){return _ref.apply(this,arguments);};}();getBudgets();},[]);// Fetch expense record\nvar fetchBudgets=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:3000/budgets');case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;return _context2.abrupt(\"return\",data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchBudgets(){return _ref2.apply(this,arguments);};}();// Fetch expense record\nvar fetchBudget=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://localhost:3000/budgets/\".concat(id));case 2:res=_context3.sent;_context3.next=5;return res.json();case 5:data=_context3.sent;return _context3.abrupt(\"return\",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchBudget(_x){return _ref3.apply(this,arguments);};}();// Add expense record \nvar addBudget=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(budget){var res,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch('http://localhost:3000/budgets',{method:'POST',headers:{'Content-type':'application/json'},body:JSON.stringify(budget)});case 2:res=_context4.sent;_context4.next=5;return res.json();case 5:data=_context4.sent;setBudgets([].concat(_toConsumableArray(budgets),[data]));case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function addBudget(_x2){return _ref4.apply(this,arguments);};}();// Delete expense record\nvar deleteBudget=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"http://localhost:3000/budgets/\".concat(id),{method:'DELETE'});case 2:res=_context5.sent;//We should control the response status to decide if we will change the state or not.\nres.status===200?setBudgets(budgets.filter(function(budget){return budget.id!==id;})):alert('Error Deleting This expense');case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function deleteBudget(_x3){return _ref5.apply(this,arguments);};}();// Toggle PaidOut Status\nvar toggleReminder=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id){var budgetToToggle,updateBudget,res,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return fetchBudget(id);case 2:budgetToToggle=_context6.sent;updateBudget=_objectSpread(_objectSpread({},budgetToToggle),{},{ispaidout:!budgetToToggle.ispaidout});_context6.next=6;return fetch(\"http://localhost:3000/budgets/\".concat(id),{method:'PUT',headers:{'Content-type':'application/json'},body:JSON.stringify(updateBudget)});case 6:res=_context6.sent;_context6.next=9;return res.json();case 9:data=_context6.sent;setBudgets(budgets.map(function(budget){return budget.id===id?_objectSpread(_objectSpread({},budget),{},{ispaidout:data.ispaidout}):budget;}));case 11:case\"end\":return _context6.stop();}}},_callee6);}));return function toggleReminder(_x4){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Header,{onAdd:function onAdd(){return setShowAddBudget(!showAddBudget);},showAdd:showAddBudget}),/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,render:function render(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[showAddBudget&&/*#__PURE__*/_jsx(AddBudget,{onAdd:addBudget}),budgets.length>0?/*#__PURE__*/_jsx(Budgets,{budgets:budgets,onToggle:toggleReminder,onDelete:deleteBudget}):'No expenditure found ']});}}),/*#__PURE__*/_jsx(Footer,{})]})});};export default App;","map":{"version":3,"sources":["/home/njoroge/Expense-Tracker/expense-tracker/src/App.js"],"names":["useEffect","useState","BrowserRouter","Router","Route","Header","Footer","Budgets","AddBudget","App","showAddBudget","setShowAddBudget","budgets","setBudgets","getBudgets","fetchBudgets","budgetsFromServer","fetch","res","json","data","fetchBudget","id","addBudget","budget","method","headers","body","JSON","stringify","deleteBudget","status","filter","alert","toggleReminder","budgetToToggle","updateBudget","ispaidout","map","props","length"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react'\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport Budgets from './components/Budgets'\nimport AddBudget from './components/AddBudget'\n\n\nconst App = () => {\n\n    const [showAddBudget, setShowAddBudget] = useState(false)\n    const [budgets, setBudgets] = useState([])\n\n    useEffect(() => {\n        const getBudgets = async () => {\n            const budgetsFromServer = await fetchBudgets()\n            setBudgets(budgetsFromServer)\n        }\n        getBudgets()\n    }, [])\n\n    // Fetch expense record\n    const fetchBudgets = async () => {\n        const res = await fetch('http://localhost:3000/budgets')\n        const data = await res.json()\n\n        return data\n    }\n\n    // Fetch expense record\n    const fetchBudget = async (id) => {\n        const res = await fetch(`http://localhost:3000/budgets/${id}`)\n        const data = await res.json()\n        return data\n    }\n\n    // Add expense record \n    const addBudget = async (budget) => {\n        const res = await fetch('http://localhost:3000/budgets', {\n            method: 'POST',\n            headers: {\n                'Content-type': 'application/json',\n            },\n            body: JSON.stringify(budget),\n        })\n        const data = await res.json()\n        setBudgets([...budgets, data])\n    }\n\n    // Delete expense record\n \n    const deleteBudget = async (id) => {\n        const res = await fetch(`http://localhost:3000/budgets/${id}`, {\n            method: 'DELETE',\n        })\n        //We should control the response status to decide if we will change the state or not.\n        res.status === 200\n            ? setBudgets(budgets.filter((budget) => budget.id !== id))\n            : alert('Error Deleting This expense')\n    }\n\n\n    // Toggle PaidOut Status\n    const toggleReminder = async (id) => {\n        const budgetToToggle = await fetchBudget(id)\n        const updateBudget = {...budgetToToggle, ispaidout: !budgetToToggle.ispaidout}\n\n        const res = await fetch(`http://localhost:3000/budgets/${id}`, {\n            method: 'PUT',\n            headers: {\n                'Content-type': 'application/json',\n            },\n            body: JSON.stringify(updateBudget),\n        })\n\n        const data = await res.json()\n\n        setBudgets(\n            budgets.map((budget) =>\n                budget.id === id ? {...budget, ispaidout: data.ispaidout} : budget\n            )\n        )\n    }\n\n    return (\n        <Router>\n            <div className='container'>\n                <Header\n                    onAdd={() => setShowAddBudget(!showAddBudget)}\n                    showAdd={showAddBudget}\n                />\n                <Route\n                    path='/'\n                    exact\n                    render={(props) => (\n                        <>\n                            {showAddBudget && <AddBudget onAdd={addBudget}/>}\n                            {budgets.length > 0 ? (\n                                <Budgets\n                                    budgets={budgets}\n                                    onToggle={toggleReminder}\n                                    onDelete={deleteBudget}\n\n                                />\n                            ) : (\n                                'No expenditure found '\n                            )}\n                        </>\n                    )}\n                />\n                \n                <Footer/>\n            </div>\n        </Router>\n    )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}